---
import { githubID, size } from '../../avatar.mjs';
const avatar = `https://avatars.githubusercontent.com/u/${githubID}?s=${size}`
---
<picture>
    <!-- <source srcset={avatar} type="image/webp"> -->
    <img src={avatar} alt="profile picture" id="pfp" class="circle blur" width="150" height="150">
</picture>

<style>
    @media only screen and (max-width: 600px) {
        #pfp {
            max-width: 125px;
            max-height: 125px;
        }
    }
</style>

<script>
    const updatePFP = () => {
        const pfp = document.getElementById("pfp");
        const resize = pfp?.getAttribute("src")?.split("?")[0];
        if (!pfp || !resize) return;

        pfp.setAttribute("src", resize);
        pfp.classList.add("unblur");
        pfp.classList.remove("blur");
    }

    updatePFP();
    document.addEventListener('astro:after-swap', updatePFP);
</script>
